var ajaxqoute_format="Html";var ajaxqoute_errormessage="Some Error occured while retriving qoute!\nIt's either server problem or comment doesn't exist anymore.";var g_com_author,q_qoute,g_aq;function ajaxquote(d,b,c){if(!document.getElementById("CommentBox")){return true}g_com_author=c;var a=new DataManager();if((g_aq=document.getElementById("AjaxQuote_"+b))){g_aq.className="HideProgress";q_qoute=g_aq.innerHTML;g_aq.innerHTML="&nbsp;"}if(document.getElementById("BBBar")&&ajaxqoute_format=="BBCode"){document.getElementById("BBBar").style.display=""}if(document.getElementById("Radio_"+ajaxqoute_format)){document.getElementById("Radio_"+ajaxqoute_format).checked=true}a.RequestCompleteEvent=_ajaxquote;a.RequestFailedEvent=_ajaxquote_failure;a.LoadData(d+"extensions/AjaxQuote/ajax.php?CommentID="+b);return false}function _ajaxquote(b){var a=document.getElementById("CommentBox");if(g_aq){g_aq.className="";g_aq.innerHTML=q_qoute}if(!b.responseText||b.responseText=="ERROR"){_ajaxquote_failure();return false}if(ajaxqoute_format=="BBCode"){ajaxquote_insert("[quote][cite] "+g_com_author+":[/cite]"+b.responseText+"[/quote]","")}else{ajaxquote_insert("<blockquote><cite> "+g_com_author+":</cite>"+b.responseText+"</blockquote>","")}return false}function _ajaxquote_failure(){document.getElementById("CommentBox").focus();alert(ajaxqoute_errormessage);return false}function ajaxquote_insert(f,d){var g=document.getElementById("CommentBox");g.focus();if(typeof document.selection!="undefined"){var c=document.selection.createRange();var h=c.text;c.text=f+h+d;c=document.selection.createRange();if(h.length==0){c.move("character",-d.length)}else{c.moveStart("character",f.length+h.length+d.length)}c.select()}else{if(typeof g.selectionStart!="undefined"){var a=g.selectionStart;var b=g.selectionEnd;var h=g.value.substring(a,b);g.value=g.value.substr(0,a)+f+h+d+g.value.substr(b);var e;if(h.length==0){e=a+f.length}else{e=a+f.length+h.length+d.length}g.selectionStart=e;g.selectionEnd=e}else{var e;var i=new RegExp("^[0-9]{0,3}$");while(!i.test(e)){e=prompt("Insert Code Position (0.."+g.value.length+"):","0")}if(e>g.value.length){e=g.value.length}var h=prompt("Insert Code value:","");g.value=g.value.substr(0,e)+f+h+d+g.value.substr(e)}}};